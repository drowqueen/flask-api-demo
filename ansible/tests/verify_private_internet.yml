- name: Verify NAT connectivity from private instances
  hosts: tag_Name_flask_backend
  become: true
  tasks:
    - name: Ping a public IP (Google DNS)
      command: ping -c 2 8.8.8.8
      register: ping_result
      ignore_errors: true

    - name: Print ping result
      debug:
        var: ping_result.stdout_lines

    - name: Test HTTPS request to example.com
      command: curl -I https://example.com
      register: curl_result
      ignore_errors: true

    - name: Print curl result
      debug:
        var: curl_result.stdout_lines
