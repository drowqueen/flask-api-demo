---
- name: Verify private subnet internet access
  hosts: app_servers
  gather_facts: no
  vars:
    ansible_user: ubuntu
  tasks:
    - name: Ping google.com from private instance
      ansible.builtin.shell: ping -c 3 google.com
      register: ping_result
      failed_when: ping_result.rc != 0
